<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Информационная Система</title>
    <style>
        /* Сброс стилей */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        header, footer {
            background-color: #333;
            color: #fff;
            padding: 10px;
            text-align: center;
        }

        header h1, footer p {
            margin: 0;
        }

        nav ul {
            list-style: none;
            padding: 0;
        }

        nav ul li {
            display: inline;
            margin-right: 10px;
        }

        nav ul li a {
            color: #fff;
            text-decoration: none;
        }

        main {
            padding: 20px;
        }

        h2 {
            color: #5a67d8;
            margin-bottom: 10px;
        }

        form label {
            display: block;
            margin-bottom: 5px;
        }

        form input, form select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        form button {
            background-color: #5a67d8;
            color: #fff;
            border: none;
            padding: 10px;
            cursor: pointer;
            border-radius: 4px;
        }

        form button:hover {
            background-color: #4c51bf;
        }

        .hint {
            font-size: 0.9em;
            color: #666;
        }

        footer p {
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <!-- Заголовок (header) -->
    <header>
        <h1>Информационная система для управления объектами недвижимости</h1>
        <nav>
            <ul>
                <li><a href="#home">Главная</a></li>
                <li><a href="#add-info">Добавить информацию</a></li>
                <li><a href="#edit-info">Редактировать информацию</a></li>
                <li><a href="#delete-info">Удалить информацию</a></li>
                <li><a href="#search-info">Поиск информации</a></li>
                <li><a href="#login" id="login-link">Вход</a></li>
                <li id="logout-link" style="display:none;"><a href="#home">Выход</a></li>
            </ul>
        </nav>
    </header>

    <!-- Основное содержимое -->
    <main>
        <section id="home">
            <h2>Добро пожаловать!</h2>
            <p>Выберите действие из меню, чтобы управлять информацией о помещениях.</p>
        </section>

        <!-- Форма входа -->
        <section id="login" style="display:none;">
            <h2>Вход</h2>
            <form id="login-form">
                <label for="username">Имя пользователя:</label>
                <input type="text" id="username" required>
                <label for="role">Роль:</label>
                <select id="role">
                    <option value="tenant">Арендатор</option>
                    <option value="admin">Администратор</option>
                </select>
                <button type="submit">Войти</button>
            </form>
        </section>

        <!-- Форма добавления информации -->
        <section id="add-info" style="display:none;">
            <h2>Добавить информацию о новом помещении</h2>
            <form id="add-form">
                <label for="title">Название помещения:</label>
                <input type="text" id="title" required>
                <label for="location">Местоположение:</label>
                <input type="text" id="location" required>
                <label for="area">Площадь (кв. м):</label>
                <input type="number" id="area" required>
                <button type="submit">Добавить помещение</button>
            </form>
        </section>

        <!-- Форма редактирования информации -->
        <section id="edit-info" style="display:none;">
            <h2>Редактировать информацию о помещении</h2>
            <form id="edit-form">
                <label for="edit-id">ID помещения:</label>
                <input type="number" id="edit-id" required>
                <label for="new-title">Новое название:</label>
                <input type="text" id="new-title">
                <label for="new-location">Новое местоположение:</label>
                <input type="text" id="new-location">
                <label for="new-area">Новая площадь (кв. м):</label>
                <input type="number" id="new-area">
                <button type="submit">Сохранить изменения</button>
            </form>
        </section>

        <!-- Форма удаления информации -->
        <section id="delete-info" style="display:none;">
            <h2>Удалить помещение</h2>
            <form id="delete-form">
                <label for="delete-id">ID помещения:</label>
                <input type="number" id="delete-id" required>
                <button type="submit">Удалить помещение</button>
            </form>
        </section>

        <!-- Форма поиска информации -->
        <section id="search-info" style="display:none;">
            <h2>Поиск информации</h2>
            <form id="search-form">
                <label for="search-query">Введите критерии поиска:</label>
                <input type="text" id="search-query" placeholder="Название, местоположение и т.д." required>
                <button type="submit">Найти</button>
            </form>
            <div id="search-results">
                <!-- Здесь будут отображаться результаты поиска -->
            </div>
        </section>
    </main>

    <!-- Нижняя информационная часть (footer) -->
    <footer>
        <p>&copy; 2024 Информационная система недвижимости</p>
    </footer>

    <script>
    // Model
    class PropertyModel {
        constructor() {
            this.key = 'properties';
            this.properties = [];
            this.load();
        }

        load() {
            const data = localStorage.getItem(this.key);
            this.properties = data ? JSON.parse(data) : [];
        }

        save() {
            localStorage.setItem(this.key, JSON.stringify(this.properties));
        }

        getNextId() {
            return this.properties.length ? Math.max(...this.properties.map(p => p.id)) + 1 : 1;
        }

        add(property) {
            this.properties.push(property);
            this.save();
        }

        update(id, updates) {
            const prop = this.properties.find(p => p.id === id);
            if (prop) {
                Object.assign(prop, updates);
                this.save();
                return true;
            }
            return false;
        }

        delete(id) {
            const index = this.properties.findIndex(p => p.id === id);
            if (index !== -1) {
                this.properties.splice(index, 1);
                this.save();
                return true;
            }
            return false;
        }

        search(query) {
            const term = query.toLowerCase();
            return this.properties.filter(p =>
                p.title.toLowerCase().includes(term) ||
                p.location.toLowerCase().includes(term) ||
                p.area.toString().includes(term)
            );
        }
    }

    // View
    class PropertyView {
        static toggleSection(sectionId) {
            document.querySelectorAll('main > section').forEach(section => {
                section.style.display = section.id === sectionId ? 'block' : 'none';
            });
        }

        static renderSearchResults(results) {
            const container = document.getElementById('search-results');
            container.innerHTML = results.length
                ? results.map(r => `
                    <p>
                        <strong>ID:</strong> ${r.id}, 
                        <strong>Название:</strong> ${r.title}, 
                        <strong>Местоположение:</strong> ${r.location}, 
                        <strong>Площадь:</strong> ${r.area} м²
                    </p>`).join('')
                : '<p>Результатов не найдено.</p>';
        }

        static resetForm(formId) {
            document.getElementById(formId).reset();
        }

        static showMessage(message) {
            alert(message);
        }
    }

    // Controller
    class PropertyController {
        constructor() {
            this.model = new PropertyModel();
            this.init();
        }

        init() {
            this.bindNavigation();
            this.bindAddForm();
            this.bindEditForm();
            this.bindDeleteForm();
            this.bindSearchForm();
        }

        bindNavigation() {
            const navLinks = document.querySelectorAll('header nav ul li a');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = link.getAttribute('href').substring(1);
                    PropertyView.toggleSection(target);
                });
            });
        }

        bindAddForm() {
            document.getElementById('add-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const title = document.getElementById('title').value;
                const location = document.getElementById('location').value;
                const area = parseInt(document.getElementById('area').value);

                this.model.add({ id: this.model.getNextId(), title, location, area });
                PropertyView.showMessage('Помещение добавлено успешно!');
                PropertyView.resetForm('add-form');
            });
        }

        bindEditForm() {
            document.getElementById('edit-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const id = parseInt(document.getElementById('edit-id').value);
                const updates = {
                    title: document.getElementById('new-title').value || undefined,
                    location: document.getElementById('new-location').value || undefined,
                    area: parseInt(document.getElementById('new-area').value) || undefined,
                };

                if (this.model.update(id, updates)) {
                    PropertyView.showMessage('Информация обновлена успешно!');
                    PropertyView.resetForm('edit-form');
                } else {
                    PropertyView.showMessage('Помещение с таким ID не найдено!');
                }
            });
        }

        bindDeleteForm() {
            document.getElementById('delete-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const id = parseInt(document.getElementById('delete-id').value);

                if (this.model.delete(id)) {
                    PropertyView.showMessage('Помещение удалено успешно!');
                    PropertyView.resetForm('delete-form');
                } else {
                    PropertyView.showMessage('Помещение с таким ID не найдено!');
                }
            });
        }

        bindSearchForm() {
            document.getElementById('search-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const query = document.getElementById('search-query').value;
                const results = this.model.search(query);
                PropertyView.renderSearchResults(results);
            });
        }
    }

    // Инициализация контроллера при загрузке страницы
    document.addEventListener('DOMContentLoaded', () => {
        new PropertyController();
    });
</script>

</body>
</html>
