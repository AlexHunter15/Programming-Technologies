<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Management</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        header { background-color: #333; color: white; padding: 10px 20px; }
        header nav ul { list-style: none; margin: 0; padding: 0; display: flex; }
        header nav ul li { margin-right: 15px; }
        header nav ul li a { color: white; text-decoration: none; }
        main > section { display: none; padding: 20px; }
        main > section#home { display: block; }
        form { margin-bottom: 20px; }
        label { display: block; margin-bottom: 5px; }
        input[type="text"], input[type="number"] { width: 100%; padding: 8px; margin-bottom: 10px; }
        button { padding: 10px 20px; background-color: #007BFF; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #0056b3; }
    </style>
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#add">Add Property</a></li>
                <li><a href="#edit">Edit Property</a></li>
                <li><a href="#delete">Delete Property</a></li>
                <li><a href="#search">Search Property</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="home">
            <h1>Welcome to Real Estate Management</h1>
        </section>

        <section id="add">
            <h1>Add Property</h1>
            <form id="add-form">
                <label for="title">Title:</label>
                <input type="text" id="title" required>

                <label for="location">Location:</label>
                <input type="text" id="location" required>

                <label for="area">Area (sq.m):</label>
                <input type="number" id="area" required>

                <button type="submit">Add</button>
            </form>
        </section>

        <section id="edit">
            <h1>Edit Property</h1>
            <form id="edit-form">
                <label for="edit-id">Property ID:</label>
                <input type="number" id="edit-id" required>

                <label for="new-title">New Title:</label>
                <input type="text" id="new-title">

                <label for="new-location">New Location:</label>
                <input type="text" id="new-location">

                <label for="new-area">New Area (sq.m):</label>
                <input type="number" id="new-area">

                <button type="submit">Update</button>
            </form>
        </section>

        <section id="delete">
            <h1>Delete Property</h1>
            <form id="delete-form">
                <label for="delete-id">Property ID:</label>
                <input type="number" id="delete-id" required>
                <button type="submit">Delete</button>
            </form>
        </section>

        <section id="search">
            <h1>Search Property</h1>
            <form id="search-form">
                <label for="search-query">Search:</label>
                <input type="text" id="search-query">
                <button type="submit">Search</button>
            </form>
            <div id="search-results"></div>
        </section>
    </main>

    <script>
        class PostList {
            constructor() {
                this.key = 'ObjInf';
                this.data = [];
            }

            save() {
                localStorage.setItem(this.key, JSON.stringify(this.data));
            }

            restore() {
                const storedData = localStorage.getItem(this.key);
                this.data = storedData ? JSON.parse(storedData) : [];
            }

            get nextId() {
                return this.data.length ? Math.max(...this.data.map(obj => obj.id)) + 1 : 1;
            }

            add(property) {
                this.data.push(property);
                this.save();
            }

            update(id, updates) {
                const property = this.data.find(prop => prop.id === id);
                if (property) Object.assign(property, updates);
                this.save();
                return property;
            }

            delete(id) {
                const index = this.data.findIndex(prop => prop.id === id);
                if (index !== -1) {
                    this.data.splice(index, 1);
                    this.save();
                    return true;
                }
                return false;
            }

            search(query) {
                const lowerQuery = query.toLowerCase();
                return this.data.filter(prop =>
                    (prop.title || '').toLowerCase().includes(lowerQuery) ||
                    (prop.location || '').toLowerCase().includes(lowerQuery) ||
                    (prop.area || '').toString().includes(lowerQuery)
                );
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const model = new PostList();
            model.restore();

            const navLinks = document.querySelectorAll('header nav ul li a');
            const sections = document.querySelectorAll('main > section');
            const resultsContainer = document.getElementById('search-results');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = link.getAttribute('href').substring(1);
                    sections.forEach(section => {
                        section.style.display = section.id === target ? 'block' : 'none';
                    });
                });
            });

            document.getElementById('add-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const title = document.getElementById('title').value;
                const location = document.getElementById('location').value;
                const area = parseInt(document.getElementById('area').value);

                model.add({ id: model.nextId, title, location, area });
                alert('Property added successfully!');
                e.target.reset();
            });

            document.getElementById('edit-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const id = parseInt(document.getElementById('edit-id').value);
                const updates = {
                    title: document.getElementById('new-title').value || undefined,
                    location: document.getElementById('new-location').value || undefined,
                    area: parseInt(document.getElementById('new-area').value) || undefined,
                };

                if (model.update(id, updates)) {
                    alert('Property updated successfully!');
                    e.target.reset();
                } else {
                    alert('Property not found!');
                }
            });

            document.getElementById('delete-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const id = parseInt(document.getElementById('delete-id').value);
                if (model.delete(id)) {
                    alert('Property deleted successfully!');
                    e.target.reset();
                } else {
                    alert('Property not found!');
                }
            });

            document.getElementById('search-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const query = document.getElementById('search-query').value;
                const results = model.search(query);
                resultsContainer.innerHTML = results.length
                    ? results.map(prop => `
                        <p>
                            <strong>ID:</strong> ${prop.id}, 
                            <strong>Title:</strong> ${prop.title}, 
                            <strong>Location:</strong> ${prop.location}, 
                            <strong>Area:</strong> ${prop.area} sq.m
                        </p>`).join('')
                    : '<p>No results found.</p>';
            });
        });
    </script>
</body>
</html>
