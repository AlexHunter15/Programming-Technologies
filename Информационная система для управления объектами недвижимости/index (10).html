<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Информационная Система</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Заголовок (header) -->
    <header>
        <h1>Информационная система для управления объектами недвижимости</h1>
        <nav>
            <ul>
                <li><a href="#home">Главная</a></li>
                <li><a href="#add-info">Добавить информацию</a></li>
                <li><a href="#edit-info">Редактировать информацию</a></li>
                <li><a href="#delete-info">Удалить информацию</a></li>
                <li><a href="#search-info">Поиск информации</a></li>
                <li><a href="#login" id="login-link">Вход</a></li>
                <li id="logout-link" style="display:none;"><a href="#home">Выход</a></li>
            </ul>
        </nav>
    </header>
    
    <!-- Основное содержимое -->
    <main>
        <section id="home">
            <h2>Добро пожаловать!</h2>
            <p>Выберите действие из меню, чтобы управлять информацией о помещениях.</p>
        </section>

        <!-- Форма входа -->
        <section id="login" style="display:none;">
            <h2>Вход</h2>
            <form id="login-form">
                <label for="username">Имя пользователя:</label>
                <input type="text" id="username" required>
                <label for="role">Роль:</label>
                <select id="role">
                    <option value="tenant">Арендатор</option>
                    <option value="admin">Администратор</option>
                </select>
                <button type="submit">Войти</button>
            </form>
        </section>

        <!-- Остальные формы -->
        <!-- Форма добавления информации -->
        <section id="add-info" style="display:none;">
            <h2>Добавить информацию о новом помещении</h2>
            <form>
                <label for="title">Название помещения:</label>
                <input type="text" id="title" required>
                <label for="location">Местоположение:</label>
                <input type="text" id="location" required>
                <label for="area">Площадь (кв. м):</label>
                <input type="number" id="area" required>
                <button type="submit">Добавить помещение</button>
            </form>
        </section>
<section id="object-list-container">
  <h2>Список объектов</h2>
  <div id="object-list"></div>
</section>

        <!-- Аналогично формы редактирования, удаления, поиска информации -->

    </main>
    <!-- Нижняя информационная часть (footer) -->
    <footer>
        <p>&copy; 2024 Информационная система недвижимости</p>
    </footer>

    <!-- Подключение JavaScript -->
    <script src="app.js"></script>
</body>
</html>

<style>
/* Сброс стилей */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    color: #333;
}

header, footer {
    background-color: #333;
    color: #fff;
    padding: 10px;
    text-align: center;
}

header h1, footer p {
    margin: 0;
}

nav ul {
    list-style: none;
    padding: 0;
}

nav ul li {
    display: inline;
    margin-right: 10px;
}

nav ul li a {
    color: #fff;
    text-decoration: none;
}

main {
    padding: 20px;
}

h2 {
    color: #5a67d8;
    margin-bottom: 10px;
}

form label {
    display: block;
    margin-bottom: 5px;
}

form input, form select {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

form button {
    background-color: #5a67d8;
    color: #fff;
    border: none;
    padding: 10px;
    cursor: pointer;
    border-radius: 4px;
}

form button:hover {
    background-color: #4c51bf;
}

.hint {
    font-size: 0.9em;
    color: #666;
}

footer p {
    font-size: 0.9em;
}
</style>
<script>
const App = (() => {
  // Модель (Model)
  const Model = {
    currentUser: "Ivan Ivanov",
    objData: [
      { id: "1", description: "Описание объекта 1", createdAt: new Date("2024-01-01"), author: "Ivan Ivanov" },
      { id: "2", description: "Описание объекта 2", createdAt: new Date("2024-01-02"), author: "Peter Petrov" },
      { id: "3", description: "Описание объекта 3", createdAt: new Date("2024-01-03"), author: "Anna Smirnova" },
    ],

    addObject(obj) {
      if (!obj || !obj.id || !obj.description || !obj.author || !(obj.createdAt instanceof Date)) {
        console.error("Некорректные данные объекта.");
        return;
      }
      this.objData.push(obj);
    },

    removeObject(id) {
      this.objData = this.objData.filter((obj) => obj.id !== id);
    },

    editObject(id, newDescription) {
      const objIndex = this.objData.findIndex((obj) => obj.id === id);
      if (objIndex === -1) {
        console.error("Объект не найден.");
        return false;
      }
      this.objData[objIndex].description = newDescription;
      return true;
    },

    filterObjects(filterConfig) {
      let filteredData = [...this.objData];
      if (filterConfig.author) {
        filteredData = filteredData.filter((obj) => obj.author === filterConfig.author);
      }
      if (filterConfig.createdAt) {
        filteredData = filteredData.filter(
          (obj) => new Date(obj.createdAt).toDateString() === new Date(filterConfig.createdAt).toDateString()
        );
      }
      return filteredData;
    },
  };

  // Представление (View)
  const View = {
    displayCurrentUser(user) {
      const userContainer = document.getElementById("current-user");
      if (!userContainer) return;
      userContainer.textContent = user ? `Пользователь: ${user}` : "Вы не авторизованы";
    },

    displayObjects(objects, currentUser) {
      const objectList = document.getElementById("object-list");
      objectList.innerHTML = ""; // Очистка
      objects.forEach((obj) => {
        const objElement = document.createElement("div");
        objElement.className = "object-item";
        objElement.id = `obj-${obj.id}`;
        objElement.innerHTML = `
          <h3>${obj.description}</h3>
          <p>Автор: ${obj.author}</p>
          <p>Дата создания: ${new Date(obj.createdAt).toLocaleDateString()}</p>
          ${
            currentUser === obj.author
              ? `
            <button data-id="${obj.id}" class="edit-btn">Редактировать</button>
            <button data-id="${obj.id}" class="delete-btn">Удалить</button>
          `
              : ""
          }
        `;
        objectList.appendChild(objElement);
      });
    },
  };

  // Контроллер (Controller)
  const Controller = {
    init() {
      View.displayCurrentUser(Model.currentUser);
      View.displayObjects(Model.objData, Model.currentUser);

      this.setupEventListeners();
    },

    setupEventListeners() {
      document.getElementById("object-list").addEventListener("click", (event) => {
        if (event.target.classList.contains("edit-btn")) {
          this.handleEditObject(event.target.dataset.id);
        } else if (event.target.classList.contains("delete-btn")) {
          this.handleRemoveObject(event.target.dataset.id);
        }
      });
    },

    handleEditObject(id) {
      const obj = Model.objData.find((obj) => obj.id === id);
      if (!obj) return;

      const newDescription = prompt("Введите новое описание:", obj.description);
      if (newDescription) {
        const success = Model.editObject(id, newDescription);
        if (success) {
          View.displayObjects(Model.objData, Model.currentUser);
        }
      }
    },

    handleRemoveObject(id) {
      Model.removeObject(id);
      View.displayObjects(Model.objData, Model.currentUser);
    },
  };

  return {
    init: Controller.init.bind(Controller),
  };
})();

// Инициализация приложения
document.addEventListener("DOMContentLoaded", App.init);
</script>

